<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <title>Chatbot Website</title>
</head>

<body>
    <div class="sidebar">
        <button class="btn btn-primary btn-fixed-size" id="mpeda" onclick="redirectToMpedaSpecific()">MPEDA Specific
            Query
        </button>
        <div class="dash"></div>

       
    </div>
    <div class="main-content">
        <header style="display: flex ; justify-content:space-between;">
            <h1><strong>
                <a href="index.html">
                    Seafood Chatbot

                </a>
                </strong></h1>
            <button class="btn btn-primary" id="logoutButton">Logout</button>

            <!-- <p>Have a Seamless Experience of our new product</p> -->
        </header>
        <div class="container">
            <div id="news-container"></div>
        </div>

        <div class="chat-container" style="margin: 3%;">
            <div id="chat-form">
                <form id="chat-form" action="{{ url_for('get_answer')}}" method="post">
                    <!-- <label for="input-text">Enter your question here:</label> -->
                    <input type="text" placeholder="Enter Your Query here:" id="input-text" name="input_text" required
                        style="width: 500px;" oninput="checkWordLimit(this, 150)" required>
                    <select name="target_language" id="target_language" required style="margin-left: 2%;">
                        <option value="es">Spanish</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="it">Italian</option>
                        <option value="pt">Portuguese</option>
                        <!-- Add more languages as needed -->
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="zh-CN">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="ru">Russian</option>
                        <option value="ar">Arabic</option>
                        <option value="hi">Hindi</option>
                        <option value="bn">Bengali</option>
                        <option value="ur">Urdu</option>
                        <option value="vi">Vietnamese</option>
                        <option value="th">Thai</option>
                        <option value="ms">Malay</option>
                        <option value="id">Indonesian</option>
                        <option value="fil">Filipino</option>
                        <option value="tr">Turkish</option>
                        <option value="fa">Persian</option>
                        <option value="he">Hebrew</option>
                        <option value="pl">Polish</option>
                        <option value="nl">Dutch</option>
                        <option value="sv">Swedish</option>
                        <option value="da">Danish</option>
                        <option value="fi">Finnish</option>
                        <option value="no">Norwegian</option>
                        <option value="cs">Czech</option>
                        <option value="hu">Hungarian</option>
                        <option value="ro">Romanian</option>
                        <option value="uk">Ukrainian</option>
                        <!-- Add more language options as needed -->
                    </select>
                    <button type="submit" class="btn btn-primary  btn-large " id="submit-button">Ask Query</button>
                </form>
            </div>
            <div id="chat-form">
                <form id="chat-form" action="{{ url_for('upload_image')}}" method="post" enctype="multipart/form-data" style="margin: 3%;">
                    <!-- <label for="input-text">Enter your question here:</label> -->
                    <label for="image_upload"><strong>Upload your image file</strong></label>
                    <input type="file" id="image_upload" name="image_upload" accept="image/*">
                    <select name="target_language" id="target_language" required >
                        <option value="es">Spanish</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="it">Italian</option>
                        <option value="pt">Portuguese</option>
                        <!-- Add more languages as needed -->
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="zh-CN">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="ru">Russian</option>
                        <option value="ar">Arabic</option>
                        <option value="hi">Hindi</option>
                        <option value="bn">Bengali</option>
                        <option value="ur">Urdu</option>
                        <option value="vi">Vietnamese</option>
                        <option value="th">Thai</option>
                        <option value="ms">Malay</option>
                        <option value="id">Indonesian</option>
                        <option value="fil">Filipino</option>
                        <option value="tr">Turkish</option>
                        <option value="fa">Persian</option>
                        <option value="he">Hebrew</option>
                        <option value="pl">Polish</option>
                        <option value="nl">Dutch</option>
                        <option value="sv">Swedish</option>
                        <option value="da">Danish</option>
                        <option value="fi">Finnish</option>
                        <option value="no">Norwegian</option>
                        <option value="cs">Czech</option>
                        <option value="hu">Hungarian</option>
                        <option value="ro">Romanian</option>
                        <option value="uk">Ukrainian</option>
                        <!-- Add more language options as needed -->
                    </select>


                    <button type="submit" class="btn btn-primary  btn-large " id="submit-button">Upload Image</button>
                </form>
            </div>
            <div id="chat-form">
                <form id="chat-form" action="{{ url_for('upload_csv')}}" method="post" enctype="multipart/form-data" style="margin: 3%;">
                    <!-- <label for="input-text">Enter your question here:</label> -->
                    <label for="csv_upload"><strong>Upload your CSV file</strong></label>

                    <input type="file" id="csv_upload" name="csv_upload" accept=".csv">
                    <select name="target_language" id="target_language" required >
                        <option value="es">Spanish</option>
                        <option value="fr">French</option>
                        <option value="de">German</option>
                        <option value="it">Italian</option>
                        <option value="pt">Portuguese</option>
                        <!-- Add more languages as needed -->
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="zh-CN">Chinese (Simplified)</option>
                        <option value="zh-TW">Chinese (Traditional)</option>
                        <option value="ru">Russian</option>
                        <option value="ar">Arabic</option>
                        <option value="hi">Hindi</option>
                        <option value="bn">Bengali</option>
                        <option value="ur">Urdu</option>
                        <option value="vi">Vietnamese</option>
                        <option value="th">Thai</option>
                        <option value="ms">Malay</option>
                        <option value="id">Indonesian</option>
                        <option value="fil">Filipino</option>
                        <option value="tr">Turkish</option>
                        <option value="fa">Persian</option>
                        <option value="he">Hebrew</option>
                        <option value="pl">Polish</option>
                        <option value="nl">Dutch</option>
                        <option value="sv">Swedish</option>
                        <option value="da">Danish</option>
                        <option value="fi">Finnish</option>
                        <option value="no">Norwegian</option>
                        <option value="cs">Czech</option>
                        <option value="hu">Hungarian</option>
                        <option value="ro">Romanian</option>
                        <option value="uk">Ukrainian</option>
                        <!-- Add more language options as needed -->
                    </select>


                    <button type="submit" class="btn btn-primary  btn-large " id="submit-button">Upload CSV</button>
                </form>
            </div>
        </div>

        <script>
            document.getElementById('logoutButton').addEventListener('click', function () {
                // JavaScript code to send the email
                fetch('/send_email') // Assuming you have a Flask route to handle this
                    .then(response => response.json())
                    .then(data => {
                        console.log('Email sent successfully:', data);
                    })
                    .catch(error => {
                        console.error('Error sending email:', error);
                    });
            });


            function redirectToMpedaSpecific() {
                // Replace 'mpeda_specific.html' with the actual target page
                window.location.href = 'mpeda_specific.html';
            }


            document.addEventListener('DOMContentLoaded', function () {
            const newsContainer = document.getElementById('news-container');

            // Function to fetch news from the API
            async function fetchNews() {
                try {
                    const response = await fetch('https://newsapi.org/v2/everything?q=Aquaculture&pageSize=4&from=2023-11-15&sortBy=publishedAt&apiKey=8b6fb5f00d1c429db70dfd2d525a1190');
                    const data = await response.json();
                    return data.articles;
                } catch (error) {
                    console.error('Error fetching news:', error);
                }
            }

            async function updateNews() {
                const newsData = await fetchNews();

                newsContainer.innerHTML = '';

                newsData.forEach(article => {
                    const card = document.createElement('div');
                    card.classList.add('card');

                    card.innerHTML = `
                    <p><strong>${article.title}</strong></p>
                    <p>${article.description.length > 50 ? article.description.substring(0, 100) + '...' : article.description}</p>
                    <img src="${article.urlToImage}" alt="News Image">
                    <style>${article.pageSize = 10}</style>
                `;

                    newsContainer.appendChild(card);
                });
            }


            updateNews();


            setInterval(updateNews, 60000);
        });

        function checkWordLimit(inputElement, limit) {
            // Get the input value
            var inputValue = inputElement.value;

            // Split the input value by space to count words
            var words = inputValue.split(/\s+/);

            // Check if the number of words exceeds the limit
            if (words.length > limit) {
                // Trim the input value to the specified word limit
                var trimmedValue = words.slice(0, limit).join(' ');
                inputElement.value = trimmedValue;
            }
        }
        </script>

</body>

</html>